<link rel="stylesheet" href="bower_components/csspinner/csspinner.min.css" />
<style>
label { display: block; }
</style>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script>
var Proxy = require('xv-proxy');

var proxy = new Proxy();
$(document).on('click', 'input[type=checkbox]', function(ev) {
   var obj = $(ev.currentTarget);
   var checked = obj.is(':checked');

   obj.addClass('csspinner');
   var cb = function() { obj.removeClass('csspinner'); };

   switch (obj.attr('name')) {
      case 'enabled':
         if (checked) {
            proxy.listen($('#port').val(), '0.0.0.0', cb);
         } else {
            proxy.close(cb);
         }
         break;
   }
});
</script>

<fieldset>
<legend>Proxy</legend>
<label>
<input type="checkbox" name="enabled" />
Enabled
</label>
<label>
Port
<input type="text" name="port" id="port" value="8080" />
</label>
</fieldset>
